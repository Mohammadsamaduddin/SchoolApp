<div class="form-container">
    <h1>Student Registration</h1>

    <form [formGroup]="studentform">
        <label for="">Name:</label>
        <input type="text" formControlName="name">
        <div *ngIf="studentform.get('name')?.touched">
            <p class="error" *ngIf="studentform.get('name')?.errors?.['required']">Name required</p>
        </div>
        <br>

        <label for="">Gender:</label>
        <div *ngIf="studentform.get('gender')?.touched">
            <p class="error" *ngIf="studentform.get('gender')?.errors?.['required']">Gender required</p>
        </div>
        <input type="radio" value="female" formControlName="gender">
        <label for="">Female</label>

        <input type="radio" value="male" formControlName="gender">
        <label for="">Male</label>
        <br>

        <label for="">Mobile:</label>
        <input type="number" formControlName="mobile">
        <div *ngIf="studentform.get('mobile')?.touched">
            <p class="error" *ngIf="studentform.get('mobile')?.errors?.['required']">Mobile required</p>
            <p class="error" *ngIf="studentform.get('mobile')?.errors?.['min']">Mobile number should be 10 digits</p>
            <p class="error" *ngIf="studentform.get('mobile')?.errors?.['max']">Mobile number above 10 digits not
                allowed</p>

        </div>
        <br>

        <label for="">Email:</label>
        <input type="email" formControlName="email">
        <div *ngIf="studentform.get('email')?.touched">
            <p class="error" *ngIf="studentform.get('email')?.errors?.['required']">Email required</p>
        </div>
        <br>

        <label for="">Batch</label>
        <input type="date" formControlName="batch">
        <div *ngIf="studentform.get('batch')?.touched">
            <p class="error" *ngIf="studentform.get('batch')?.errors?.['required']">Batch required</p>
        </div>
        <br>

        <div formGroupName="address">
            <h3>Address:</h3>
            <label for="">City:</label>
            <input type="text" formControlName="city">
            <br>

            <label for="">Mandal:</label>
            <input type="text" formControlName="mandal">
            <br>

            <label for="">District:</label>
            <input type="text" formControlName="district">
            <div *ngIf="studentform.get('address')?.get('district')?.touched">
                <p class="error" *ngIf="studentform.get('address')?. get('district')?.errors?.['required']">District
                    mandatory</p>

            </div>
            <br>

            <label for="">State:</label>
            <input type="text" formControlName="state">
            <br>

            <label for="">Pin code:</label>
            <input type="number" formControlName="pincode">
            <div *ngIf="studentform.get('address')?.get('pincode')?.touched">
                <p class="error" *ngIf="studentform.get('address')?. get('pincode')?.errors?.['required']">Pincode
                    mandatory</p>
                <p class="error" *ngIf="studentform.get('address')?. get('pincode')?.errors?.['min']">Pin code should be
                    6 numbers</p>
                <p class="error" *ngIf="studentform.get('address')?. get('pincode')?.errors?.['max']">Pincode above 6
                    numbers not allowed</p>

            </div>
            <br>

        </div>

        <div>
            <button style="margin-bottom: 20px;" class="btn btn-primary" (click)="addEducation()">Add Education</button>
        </div>

        <div formArrayName="education">
            <div *ngFor="let educations of educationFormArray.controls, let i= index">
                <div formGroupName="{{i}}">
                    <h1>Education:{{i+1}}</h1>

                    <label for="">Qualification:</label>
                    <input type="text" formControlName="qualification">
                    <br>

                    <label for="">Year:</label>
                    <input type="number" formControlName="year">
                    <br>

                    <label for="">Percentage:</label>
                    <input type="number" formControlName="percentage">
                    <div *ngIf="educationFormArray.controls[i]?.get('percentage')?.touched">
                        <p class="error"
                            *ngIf="educationFormArray.controls[i]?.get('percentage')?.errors?.['required']">% required
                        </p>
                        <p class="error" *ngIf="educationFormArray.controls[i]?.get('percentage')?.errors?.['min']">
                            Minimum 1</p>
                        <p class="error" *ngIf="educationFormArray.controls[i]?.get('percentage')?.errors?.['max']">
                            Maximum 100</p>
                    </div>
                    <br>

                    <button class="btn btn-danger" (click)="onDelete(i)">Delete</button>

                    <hr> 
                </div>
            </div>
        </div>

        <div formGroupName="company">
            <h3>Company:</h3>
            <label for="">Name:</label>
            <input type="text" formControlName="name">
            <br>

            <label for="">Location:</label>
            <input type="text" formControlName="location">
            <br>

            <label for="">Package:</label>
            <input type="number" formControlName="package">
            <br>

            <label for="">Offerdate:</label>
            <input type="date" formControlName="offerdate">
            <br>
        </div>

        <label for="">Sourcetype:</label>
        <input type="radio" formControlName="sourcetype" value="direct">
        <label for="">Direct</label>
        <input type="radio" formControlName="sourcetype" value="referral">
        <label for="">Referral</label>

        <br>

        <div *ngIf="studentform.get('sourcetype')?.value=='direct'">
            <label for="">Source from:</label>
            <input type="radio" value="socialmedia" formControlName="sourcefrom">
            <label for="">Social media:</label>
            <input type="radio" value="office" formControlName="sourcefrom">
            <label for="">Office:</label>
            <br>
        </div>

        <div *ngIf="studentform.get('sourcetype')?.value=='referral'">
            <label for="">Referral Name:</label>
            <input type="text" formControlName="referralname">
            <br>
        </div>
        <!-- [disabled]="studentform.invalid" -->
        <button style="margin-top: 20px;" class="btn btn-info" (click)="onSubmit()">Submit</button>


    </form>
</div>